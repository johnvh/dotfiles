#!/bin/bash

function setprompt {
    local NONE="\[\033[0m\]"    # unsets color to term's fg color
    
    # regular colors
    local K="\[\033[0;30m\]"    # black
    local R="\[\033[0;31m\]"    # red
    local G="\[\033[0;32m\]"    # green
    local Y="\[\033[0;33m\]"    # yellow
    local B="\[\033[0;34m\]"    # blue
    local M="\[\033[0;35m\]"    # magenta
    local C="\[\033[0;36m\]"    # cyan
    local W="\[\033[0;37m\]"    # white
    
    # background colors
    local BGK="\[\033[40m\]"
    local BGR="\[\033[41m\]"
    local BGG="\[\033[42m\]"
    local BGY="\[\033[43m\]"
    local BGB="\[\033[44m\]"
    local BGM="\[\033[45m\]"
    local BGC="\[\033[46m\]"
    local BGW="\[\033[47m\]"

    #local H=`hostname | sed -e 's,\.\(..\)[^.]*,.\1,g' -e 's/...$/./'`
    local H=$(hostname)
    
    # create a bash color value from hostname
    local HCV=$((31 + $(hostname | cksum | cut -c1-3) % 6))
    local HC="\[\033[0;${HCV}m\]"
    
    local PROMPT_C=$W
    local USER_C=$B
    local HOST_C=$HC
    local PATH_C=$C
    local GIT_C=$M
    
PS1="${USER_C}\u\
${PROMPT_C}@\
${HOST_C}\h \
${PATH_C}\w \
\$(__git_ps1 \"${GIT_C}(%s) \")\
${PROMPT_C}\$${NONE} "

    export PS1
    export GIT_PS1_SHOWDIRTYSTATE=1
}
